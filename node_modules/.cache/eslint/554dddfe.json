[{"/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/main.ts":"1","/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/App.vue":"2","/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/router/index.ts":"3","/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/views/HomePage.vue":"4","/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/views/ScannerPage.vue":"5","/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/states.ts":"6","/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/components/QRCodeScanner.vue":"7"},{"size":865,"mtime":1664632667416,"results":"8","hashOfConfig":"9"},{"size":321,"mtime":1664576364709,"results":"10","hashOfConfig":"9"},{"size":563,"mtime":1664576364709,"results":"11","hashOfConfig":"9"},{"size":2126,"mtime":1664645526365,"results":"12","hashOfConfig":"9"},{"size":4840,"mtime":1664648046983,"results":"13","hashOfConfig":"9"},{"size":234,"mtime":1664576364709,"results":"14","hashOfConfig":"9"},{"size":4177,"mtime":1664645517969,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","suppressedMessages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"vledko",{"filePath":"19","messages":"20","suppressedMessages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"22","messages":"23","suppressedMessages":"24","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"25","messages":"26","suppressedMessages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"28","messages":"29","suppressedMessages":"30","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","suppressedMessages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","suppressedMessages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37"},"/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/main.ts",[],[],"/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/App.vue",[],[],"/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/router/index.ts",[],[],"/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/views/HomePage.vue",[],[],"/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/views/ScannerPage.vue",[],[],"/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/states.ts",[],[],"/home/frey/SDSLabs/Ionic-Vue-QR-Code-Scanner1/src/components/QRCodeScanner.vue",["38"],[],"<template>\r\n  <div v-if=\"!initialized\">Initializing...</div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { onBeforeUnmount, onMounted, ref, watch } from 'vue';\r\nimport { DBR, Options, ScanResult } from \"capacitor-plugin-dynamsoft-barcode-reader\";\r\nimport { PluginListenerHandle } from \"@capacitor/core\";\r\n\r\nconst props = defineProps(['license','dceLicense','torchOn','runtimeSettings']);\r\nconst emit = defineEmits(['onScanned','onPlayed']);\r\nconst initialized = ref(false);\r\nlet currentHeight = 0;\r\nlet currentWidth = 0;\r\nlet frameReadListener:PluginListenerHandle|undefined;\r\nlet onPlayedListener:PluginListenerHandle|undefined;\r\n\r\nconst handleRotation = (result:any, orientation: string, rotation:number) => {\r\n   let width,height;\r\n   if (orientation == \"portrait\") {\r\n     width = currentHeight;\r\n     height = currentWidth;\r\n   }else{\r\n     width = currentWidth;\r\n     height = currentHeight;\r\n   }\r\n   for (let i = 1; i < 5; i++) {\r\n     let x = result[\"x\"+i];\r\n     let y = result[\"y\"+i];\r\n     let rotatedX;\r\n     let rotatedY;\r\n            \r\n     switch (rotation) {\r\n       case 0:\r\n         rotatedX = x;\r\n         rotatedY = y;\r\n         break;\r\n       case 90:\r\n         rotatedX = width - y;\r\n         rotatedY = x;\r\n         break;\r\n       case 180:\r\n         rotatedX = width - x;\r\n         rotatedY = height - y;\r\n         break;\r\n       case 270:\r\n         rotatedX = height - y;\r\n         rotatedY = width - x;\r\n         break;\r\n       default:\r\n         rotatedX = x;\r\n         rotatedY = y;\r\n     }\r\n     result[\"x\"+i] = rotatedX;\r\n     result[\"y\"+i] = rotatedY;\r\n   }\r\n }\r\n\r\n\r\nonMounted(async () => {\r\n  console.log(props);\r\n  let options:Options = {};\r\n  if (props.license) {\r\n    options.license = props.license;\r\n  }\r\n  if (props.dceLicense) {\r\n    options.dceLicense = props.dceLicense;\r\n  }\r\n  let result = await DBR.initialize(options); // To use your license: DBR.initialize({license: <your license>})\r\n  console.log(\"QRCodeScanner mounted\");\r\n  if (result.success === true) {\r\n    initialized.value = true;\r\n    if (frameReadListener) {\r\n      frameReadListener.remove();\r\n    }\r\n    if (onPlayedListener) {\r\n      onPlayedListener.remove();\r\n    }\r\n    frameReadListener = await DBR.addListener('onFrameRead', (scanResult:ScanResult) => {\r\n      for (let index = 0; index < scanResult.results.length; index++) {\r\n        const result = scanResult.results[index];\r\n        if (scanResult.deviceOrientation && scanResult.frameOrientation) {\r\n          handleRotation(result,scanResult.deviceOrientation,scanResult.frameOrientation);\r\n        }\r\n      }\r\n      emit(\"onScanned\",scanResult);\r\n    });\r\n\r\n    onPlayedListener = await DBR.addListener(\"onPlayed\", (result:{resolution:string}) => {\r\n      currentWidth = parseInt(result.resolution.split(\"x\")[0]);\r\n      currentHeight = parseInt(result.resolution.split(\"x\")[1]);\r\n      emit(\"onPlayed\",result.resolution);\r\n    });\r\n\r\n    if (props.runtimeSettings) {\r\n      console.log(\"update runtime settings\");\r\n      console.log(props.runtimeSettings);\r\n      await DBR.initRuntimeSettingsWithString({template:props.runtimeSettings});\r\n    }\r\n\r\n    let camerasResult = await DBR.getAllCameras();\r\n    if (camerasResult.cameras) {\r\n      for (let index = 0; index < camerasResult.cameras.length; index++) {\r\n        const cameraID = camerasResult.cameras[index];\r\n        if (cameraID.toLowerCase().indexOf(\"founder\") != -1 ){\r\n          console.log(cameraID)\r\n          console.log(\"selct founder camera\"); //the USB camera's name of the developer\r\n          let selectionResult = await DBR.selectCamera({cameraID:cameraID});\r\n          console.log(selectionResult);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    await DBR.startScan();\r\n   \r\n  }\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  if (frameReadListener) {\r\n    frameReadListener.remove();\r\n  }\r\n  if (onPlayedListener) {\r\n    onPlayedListener.remove();\r\n  }\r\n  DBR.stopScan();\r\n  console.log(\"QRCodeScanner unmount\");\r\n});\r\n\r\n\r\n\r\nwatch(() => props.torchOn, (newVal, oldVal) => {\r\n  if (newVal === true) {\r\n    DBR.toggleTorch({on:true});\r\n  }else{\r\n    DBR.toggleTorch({on:false});\r\n  }\r\n});\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n",{"ruleId":"39","severity":1,"message":"40","line":133,"column":37,"nodeType":"41","messageId":"42","endLine":133,"endColumn":43},"@typescript-eslint/no-unused-vars","'oldVal' is defined but never used.","Identifier","unusedVar"]